<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ù…Ù† - Ù†Ø¸Ø§Ù… DNRX</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: Arial, sans-serif;
      padding: 16px;
      background: #fff;
      color: #000;
      line-height: 1.5;
      font-size: 14px;
    }
    
    .container {
      max-width: 1200px;
      width: 100%;
      margin: 0 auto;
    }
    
    header {
      text-align: center;
      margin-bottom: 30px;
      padding-bottom: 15px;
      border-bottom: 2px solid #000;
    }
    
    h1 {
      font-size: 24px;
      margin-bottom: 5px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    
    .subtitle {
      color: #666;
      font-size: 14px;
    }
    
    /* Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø¯Ù…Ù† */
    .admin-info {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 15px;
    }
    
    .admin-details {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .admin-email {
      font-weight: bold;
      color: #000;
      font-size: 16px;
    }
    
    .admin-role {
      background: #000;
      color: #fff;
      padding: 6px 15px;
      border-radius: 20px;
      font-size: 13px;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    /* Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª */
    .stats-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 25px;
    }
    
    .stat-card {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
    }
    
    .stat-value {
      font-size: 32px;
      font-weight: bold;
      color: #000;
      margin-bottom: 5px;
    }
    
    .stat-label {
      font-size: 13px;
      color: #666;
    }
    
    /* Ø§Ù„Ø£Ù‚Ø³Ø§Ù… */
    .users-section,
    .shops-section,
    .products-section {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
    }
    
    .section-title {
      font-size: 18px;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 1px solid #000;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 15px;
    }
    
    .controls {
      display: flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
    }
    
    .search-box {
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 13px;
      width: 200px;
    }
    
    .filter-buttons {
      display: flex;
      gap: 5px;
    }
    
    .filter-btn {
      padding: 6px 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
      background: #fff;
      cursor: pointer;
      font-size: 12px;
    }
    
    .filter-btn.active {
      background: #000;
      color: #fff;
      border-color: #000;
    }
    
    /* Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† */
    .users-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }
    
    .users-table th {
      background: #f5f5f5;
      padding: 12px;
      text-align: right;
      font-weight: bold;
      border-bottom: 2px solid #000;
    }
    
    .users-table td {
      padding: 12px;
      border-bottom: 1px solid #eee;
    }
    
    .user-row:hover {
      background: #f9f9f9;
    }
    
    .user-email {
      font-weight: bold;
    }
    
    /* Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… */
    .user-status {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 4px;
      font-size: 11px;
      font-weight: bold;
    }
    
    .status-pending {
      background: #fff3e0;
      color: #e65100;
    }
    
    .status-approved {
      background: #e8f5e9;
      color: #2e7d32;
    }
    
    .status-admin {
      background: #f3e5f5;
      color: #6a1b9a;
    }
    
    /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª */
    .action-buttons {
      display: flex;
      gap: 8px;
      justify-content: flex-end;
    }
    
    .action-btn {
      padding: 6px 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
      background: #fff;
      cursor: pointer;
      font-size: 12px;
      display: flex;
      align-items: center;
      gap: 5px;
      transition: all 0.2s;
    }
    
    .approve-btn {
      border-color: #2e7d32;
      color: #2e7d32;
    }
    
    .approve-btn:hover {
      background: #2e7d32;
      color: #fff;
    }
    
    .disable-btn {
      border-color: #f44336;
      color: #f44336;
    }
    
    .disable-btn:hover {
      background: #f44336;
      color: #fff;
    }
    
    .delete-btn {
      border-color: #757575;
      color: #757575;
    }
    
    .delete-btn:hover {
      background: #757575;
      color: #fff;
    }
    
    /* Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ */
    .message {
      padding: 12px;
      border-radius: 6px;
      margin-bottom: 16px;
      text-align: center;
      font-size: 13px;
      display: none;
    }
    
    .success {
      background: #e8f5e9;
      color: #2e7d32;
      border: 1px solid #c8e6c9;
    }
    
    .error {
      background: #ffebee;
      color: #c62828;
      border: 1px solid #ffcdd2;
    }
    
    .info {
      background: #e3f2fd;
      color: #1565c0;
      border: 1px solid #bbdefb;
    }
    
    /* Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
    .spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(0,0,0,.1);
      border-radius: 50%;
      border-top-color: #000;
      animation: spin 1s ease-in-out infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* Ø§Ù„ØªØ°ÙŠÙŠÙ„ */
    footer {
      text-align: center;
      margin-top: 30px;
      padding-top: 15px;
      border-top: 1px solid #ddd;
      color: #666;
      font-size: 12px;
    }
    
    /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„ */
    .nav-buttons {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }
    
    .nav-btn {
      padding: 10px 16px;
      border: 1px solid #000;
      border-radius: 6px;
      font-size: 13px;
      cursor: pointer;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      background: #fff;
      color: #000;
      transition: all 0.2s;
    }
    
    .nav-btn:hover {
      background: #f5f5f5;
    }
    
    .nav-btn-primary {
      background: #000;
      color: #fff;
    }
    
    .nav-btn-primary:hover {
      background: #333;
    }
    
    /* Ø­Ø§Ù„Ø© Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø¨ÙŠØ§Ù†Ø§Øª */
    .no-data {
      text-align: center;
      padding: 40px;
      color: #666;
    }
    
    .no-data i {
      font-size: 48px;
      margin-bottom: 15px;
      color: #ddd;
    }
    
    /* Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
    .back-to-main {
      display: flex;
      justify-content: center;
      margin: 20px 0;
    }
    
    /* Ø¥ØµÙ„Ø§Ø­Ø§Øª Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
    @media (max-width: 768px) {
      .admin-info {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .stats-container {
        grid-template-columns: 1fr;
      }
      
      .users-table {
        display: block;
        overflow-x: auto;
      }
      
      .section-title {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .controls {
        width: 100%;
      }
      
      .search-box {
        width: 100%;
      }
      
      .action-buttons {
        flex-direction: column;
        width: 100%;
      }
      
      .nav-buttons {
        flex-direction: column;
      }
    }
    
    @media (max-width: 480px) {
      body {
        padding: 12px;
      }
      
      .admin-details {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }
      
      .users-section,
      .shops-section,
      .products-section {
        padding: 15px;
      }
      
      .stat-card {
        padding: 15px;
      }
      
      .stat-value {
        font-size: 24px;
      }
    }
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <div class="container">
    <header>
      <h1><i class="fas fa-user-shield"></i> Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ù…Ù†</h1>
      <p class="subtitle">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ÙƒØ§Ù…Ù„ - Ù…ØªØ§Ø¬Ø±ØŒ Ù…Ù†ØªØ¬Ø§ØªØŒ ÙˆÙ…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</p>
    </header>
    
    <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø¯Ù…Ù† -->
    <div class="admin-info">
      <div class="admin-details">
        <div>
          <div class="admin-email" id="adminEmail">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
          <div style="font-size: 12px; color: #666;">Ù…Ø¹Ø±Ù Ø§Ù„Ø£Ø¯Ù…Ù†: <span id="adminId">...</span></div>
        </div>
        <div class="admin-role">
          <i class="fas fa-crown"></i> Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…
        </div>
      </div>
      <div class="nav-buttons">
        <button class="nav-btn" onclick="location.href='main.html'">
          <i class="fas fa-home"></i> Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
        </button>
        <button class="nav-btn" id="logoutBtn">
          <i class="fas fa-sign-out-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬
        </button>
      </div>
    </div>
    
    <!-- Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… -->
    <div id="message" class="message"></div>
    
    <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø© -->
    <div class="stats-container">
      <div class="stat-card">
        <div class="stat-value" id="totalUsers">0</div>
        <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="totalShops">0</div>
        <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØªØ§Ø¬Ø±</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="pendingApprovals">0</div>
        <div class="stat-label">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="totalAdmins">0</div>
        <div class="stat-label">Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙˆÙ†</div>
      </div>
    </div>
    
    <!-- Ù‚Ø³Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† -->
    <div class="users-section">
      <h3 class="section-title">
        <i class="fas fa-users"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
        <div class="controls">
          <input 
            type="text" 
            class="search-box" 
            id="userSearchInput"
            placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ..."
            onkeyup="filterUsers()"
          >
          <div class="filter-buttons">
            <button class="filter-btn active" onclick="setUserFilter('all')">Ø§Ù„ÙƒÙ„</button>
            <button class="filter-btn" onclick="setUserFilter('pending')">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©</button>
            <button class="filter-btn" onclick="setUserFilter('approved')">Ù…ÙØ¹Ù„ÙˆÙ†</button>
            <button class="filter-btn" onclick="setUserFilter('admins')">Ù…Ø³Ø¤ÙˆÙ„ÙˆÙ†</button>
          </div>
        </div>
      </h3>
      
      <!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† -->
      <div id="usersTableContainer">
        <table class="users-table" id="usersTable">
          <thead>
            <tr>
              <th>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</th>
              <th>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</th>
              <th>Ø§Ù„Ù…ØªØ¬Ø±</th>
              <th>Ø§Ù„Ø¯ÙˆØ±</th>
              <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
              <th>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„</th>
              <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
            </tr>
          </thead>
          <tbody id="usersTableBody">
            <tr>
              <td colspan="7" class="no-data">
                <i class="fas fa-spinner fa-spin"></i>
                <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†...</p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <!-- Ù‚Ø³Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØªØ§Ø¬Ø± -->
    <div class="shops-section">
      <h3 class="section-title">
        <i class="fas fa-store"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØªØ§Ø¬Ø±
        <div class="controls">
          <input 
            type="text" 
            class="search-box" 
            id="shopSearchInput"
            placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø±..."
            onkeyup="filterShops()"
          >
        </div>
      </h3>
      
      <!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ØªØ§Ø¬Ø± -->
      <div id="shopsTableContainer">
        <table class="users-table" id="shopsTable">
          <thead>
            <tr>
              <th>Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø±</th>
              <th>ØµØ§Ø­Ø¨ Ø§Ù„Ù…ØªØ¬Ø±</th>
              <th>Ù†ÙˆØ¹ Ø§Ù„Ù…ØªØ¬Ø±</th>
              <th>Ø§Ù„Ø¯ÙˆÙ„Ø©</th>
              <th>Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</th>
              <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</th>
              <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
            </tr>
          </thead>
          <tbody id="shopsTableBody">
            <tr>
              <td colspan="7" class="no-data">
                <i class="fas fa-spinner fa-spin"></i>
                <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ§Ø¬Ø±...</p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="back-to-main">
      <button class="nav-btn nav-btn-primary" onclick="location.href='main.html'">
        <i class="fas fa-arrow-right"></i> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
      </button>
    </div>
    
    <footer>
      <p>Ù†Ø¸Ø§Ù… DNRX - Ø§Ù„Ø¥ØµØ¯Ø§Ø± 1.0 | Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ù…Ù†</p>
      <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© 2026</p>
    </footer>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-auth.js";
    import { 
      getFirestore, 
      collection, 
      query, 
      getDocs, 
      doc, 
      updateDoc, 
      deleteDoc,
      where,
      serverTimestamp 
    } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAG4EKrB3iLEV2hsB8b08ShpSO6PXDnGjg",
      authDomain: "zio3-8ffdd.firebaseapp.com",
      databaseURL: "https://zio3-8ffdd-default-rtdb.firebaseio.com",
      projectId: "zio3-8ffdd",
      storageBucket: "zio3-8ffdd.firebasestorage.app",
      messagingSenderId: "560939348415",
      appId: "1:560939348415:web:c854e9e214e498ad2d310a",
      measurementId: "G-CVN2B2D0RD"
    };
    
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);
    
    const ADMIN_EMAIL = 'ashlhl.iq@gmail.com';
    
    let currentAdmin = null;
    let allUsers = [];
    let allShops = [];
    let currentUserFilter = 'all';
    let isRedirecting = false;

    function showMessage(type, text) {
      const messageDiv = document.getElementById('message');
      messageDiv.innerHTML = `
        <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i> 
        ${text}
      `;
      messageDiv.className = `message ${type}`;
      messageDiv.style.display = 'block';
      
      if (type !== 'success') {
        setTimeout(() => {
          messageDiv.style.display = 'none';
        }, 5000);
      }
    }

    function checkAdminPermissions(user) {
      if (!user || !user.email) return false;
      
      // ÙÙŠ Ù†Ø¸Ø§Ù…Ù†Ø§ØŒ Ø§Ù„Ø£Ø¯Ù…Ù† Ù‡Ùˆ ÙÙ‚Ø· ashlehl.iq@gmail.com
      return user.email.toLowerCase() === ADMIN_EMAIL.toLowerCase();
    }

    async function loadAllUsers() {
      try {
        const usersRef = collection(db, "dnrx_users");
        const usersQuery = query(usersRef);
        const querySnapshot = await getDocs(usersQuery);
        
        allUsers = [];
        let pendingCount = 0;
        let adminCount = 0;
        
        querySnapshot.forEach((docSnap) => {
          const userData = docSnap.data();
          const user = {
            id: docSnap.id,
            email: userData.email || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
            fullName: userData.fullName || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
            storeName: userData.storeName || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯',
            storeType: userData.storeType || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',
            userType: userData.userType || 'user',
            approved: userData.approved === true,
            profileComplete: userData.profileComplete === true,
            country: userData.country || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',
            city: userData.city || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',
            createdAt: userData.createdAt || new Date(),
            storeId: userData.storeId || null
          };
          
          allUsers.push(user);
          
          // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
          if (!user.approved) {
            pendingCount++;
          }
          if (user.userType === 'admin') {
            adminCount++;
          }
        });
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        document.getElementById('totalUsers').textContent = allUsers.length;
        document.getElementById('pendingApprovals').textContent = pendingCount;
        document.getElementById('totalAdmins').textContent = adminCount;
        
        renderUsersTable();
        
      } catch (error) {
        console.error("âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†:", error);
        showMessage('error', 'ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†');
      }
    }

    async function loadAllShops() {
      try {
        const shopsRef = collection(db, "dnrx_stores");
        const shopsQuery = query(shopsRef);
        const querySnapshot = await getDocs(shopsQuery);
        
        allShops = [];
        
        querySnapshot.forEach((docSnap) => {
          const shopData = docSnap.data();
          allShops.push({
            id: docSnap.id,
            storeName: shopData.storeName || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
            storeType: shopData.storeType || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',
            ownerId: shopData.ownerId || '',
            country: shopData.country || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',
            city: shopData.city || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',
            currency: shopData.currency || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',
            createdAt: shopData.createdAt || new Date()
          });
        });
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        document.getElementById('totalShops').textContent = allShops.length;
        
        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£Ø³Ù…Ø§Ø¡ Ø£ØµØ­Ø§Ø¨ Ø§Ù„Ù…ØªØ§Ø¬Ø±
        allShops.forEach(shop => {
          const owner = allUsers.find(user => user.id === shop.ownerId);
          shop.ownerName = owner ? owner.fullName : 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
          shop.ownerEmail = owner ? owner.email : 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
        });
        
        renderShopsTable();
        
      } catch (error) {
        console.error("âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ØªØ§Ø¬Ø±:", error);
        showMessage('error', 'ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ§Ø¬Ø±');
      }
    }

    function renderUsersTable() {
      const tbody = document.getElementById('usersTableBody');
      const searchTerm = document.getElementById('userSearchInput').value.toLowerCase();
      
      // ØªØµÙÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
      let filteredUsers = allUsers.filter(user => {
        // Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ Ø§Ù„Ø§Ø³Ù…
        const matchesSearch = user.email.toLowerCase().includes(searchTerm) || 
                             user.fullName.toLowerCase().includes(searchTerm);
        
        // Ø§Ù„ÙÙ„ØªØ± Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©
        if (currentUserFilter === 'all') {
          return matchesSearch;
        } else if (currentUserFilter === 'pending') {
          return matchesSearch && !user.approved;
        } else if (currentUserFilter === 'approved') {
          return matchesSearch && user.approved;
        } else if (currentUserFilter === 'admins') {
          return matchesSearch && user.userType === 'admin';
        }
        return matchesSearch;
      });
      
      if (filteredUsers.length === 0) {
        tbody.innerHTML = `
          <tr>
            <td colspan="7" class="no-data">
              <i class="fas fa-users-slash"></i>
              <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø³Ø§Ø¨Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„Ø¨Ø­Ø«</p>
            </td>
          </tr>
        `;
        return;
      }
      
      // ÙØ±Ø² Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†: Ø§Ù„Ù…Ø¹Ù„Ù‚ÙŠÙ† Ø£ÙˆÙ„Ø§Ù‹ØŒ Ø«Ù… Ø­Ø³Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ®
      filteredUsers.sort((a, b) => {
        if (a.approved !== b.approved) {
          return a.approved ? 1 : -1;
        }
        return new Date(b.createdAt) - new Date(a.createdAt);
      });
      
      let tableHTML = '';
      
      filteredUsers.forEach(user => {
        const date = user.createdAt?.seconds ? 
          new Date(user.createdAt.seconds * 1000).toLocaleDateString('ar-SA') : 
          'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
        
        const statusText = user.approved ? 'Ù…ÙØ¹Ù„' : 'Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©';
        const statusClass = user.approved ? 'status-approved' : 'status-pending';
        const roleClass = user.userType === 'admin' ? 'status-admin' : '';
        const roleText = user.userType === 'admin' ? 'Ù…Ø³Ø¤ÙˆÙ„' : 'Ù…Ø³ØªØ®Ø¯Ù…';
        
        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø±
        let shopName = user.storeName;
        if (!shopName || shopName === 'Ù„Ø§ ÙŠÙˆØ¬Ø¯') {
          const shop = allShops.find(s => s.ownerId === user.id);
          shopName = shop ? shop.storeName : 'Ù„Ø§ ÙŠÙˆØ¬Ø¯';
        }
        
        tableHTML += `
          <tr class="user-row">
            <td class="user-email">${user.fullName}</td>
            <td>${user.email}</td>
            <td>${shopName}</td>
            <td><span class="user-status ${roleClass}">${roleText}</span></td>
            <td><span class="user-status ${statusClass}">${statusText}</span></td>
            <td>${date}</td>
            <td>
              <div class="action-buttons">
                ${user.id !== currentAdmin?.uid ? `
                  ${!user.approved ? `
                    <button class="action-btn approve-btn" onclick="approveUser('${user.id}', '${user.email}')">
                      <i class="fas fa-check"></i> Ù…ÙˆØ§ÙÙ‚Ø©
                    </button>
                  ` : `
                    <button class="action-btn disable-btn" onclick="disableUser('${user.id}', '${user.email}')">
                      <i class="fas fa-ban"></i> ØªØ¹Ø·ÙŠÙ„
                    </button>
                  `}
                  ${user.userType !== 'admin' ? `
                    <button class="action-btn" onclick="makeAdmin('${user.id}', '${user.email}')">
                      <i class="fas fa-crown"></i> ØªØ±Ù‚ÙŠØ©
                    </button>
                  ` : `
                    <button class="action-btn disable-btn" onclick="removeAdmin('${user.id}', '${user.email}')">
                      <i class="fas fa-user"></i> Ø¥Ø²Ø§Ù„Ø© ØµÙ„Ø§Ø­ÙŠØ§Øª
                    </button>
                  `}
                  <button class="action-btn delete-btn" onclick="deleteUser('${user.id}', '${user.email}')">
                    <i class="fas fa-trash"></i> Ø­Ø°Ù
                  </button>
                ` : `
                  <span style="color: #666; font-size: 12px; padding: 6px 12px;">Ø­Ø³Ø§Ø¨Ùƒ</span>
                `}
              </div>
            </td>
          </tr>
        `;
      });
      
      tbody.innerHTML = tableHTML;
    }

    function renderShopsTable() {
      const tbody = document.getElementById('shopsTableBody');
      const searchTerm = document.getElementById('shopSearchInput').value.toLowerCase();
      
      if (allShops.length === 0) {
        tbody.innerHTML = `
          <tr>
            <td colspan="7" class="no-data">
              <i class="fas fa-store-slash"></i>
              <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ØªØ§Ø¬Ø± Ù…Ø³Ø¬Ù„Ø©</p>
            </td>
          </tr>
        `;
        return;
      }
      
      let filteredShops = allShops.filter(shop => {
        return shop.storeName.toLowerCase().includes(searchTerm) || 
               shop.ownerName.toLowerCase().includes(searchTerm) ||
               shop.storeType.toLowerCase().includes(searchTerm);
      });
      
      let tableHTML = '';
      
      filteredShops.forEach(shop => {
        const date = shop.createdAt?.seconds ? 
          new Date(shop.createdAt.seconds * 1000).toLocaleDateString('ar-SA') : 
          'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
        
        tableHTML += `
          <tr class="user-row">
            <td class="user-email">${shop.storeName}</td>
            <td>${shop.ownerName} (${shop.ownerEmail})</td>
            <td>${shop.storeType}</td>
            <td>${shop.country}</td>
            <td>${shop.city}</td>
            <td>${date}</td>
            <td>
              <div class="action-buttons">
                <button class="action-btn" onclick="viewShopDetails('${shop.id}')">
                  <i class="fas fa-eye"></i> Ø¹Ø±Ø¶
                </button>
                <button class="action-btn delete-btn" onclick="deleteShop('${shop.id}', '${shop.storeName}')">
                  <i class="fas fa-trash"></i> Ø­Ø°Ù
                </button>
              </div>
            </td>
          </tr>
        `;
      });
      
      tbody.innerHTML = tableHTML;
    }

    window.approveUser = async function(userId, userEmail) {
      if (!confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${userEmail}ØŸ`)) {
        return;
      }
      
      try {
        const userRef = doc(db, "dnrx_users", userId);
        await updateDoc(userRef, {
          approved: true,
          updatedAt: serverTimestamp()
        });
        
        showMessage('success', `âœ… ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ ${userEmail}`);
        loadAllUsers();
        
      } catch (error) {
        console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:", error);
        showMessage('error', 'âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
      }
    };

    window.disableUser = async function(userId, userEmail) {
      if (!confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${userEmail}ØŸ`)) {
        return;
      }
      
      try {
        const userRef = doc(db, "dnrx_users", userId);
        await updateDoc(userRef, {
          approved: false,
          updatedAt: serverTimestamp()
        });
        
        showMessage('success', `âœ… ØªÙ… ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ${userEmail}`);
        loadAllUsers();
        
      } catch (error) {
        console.error("âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:", error);
        showMessage('error', 'âŒ ÙØ´Ù„ ÙÙŠ ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
      }
    };

    window.makeAdmin = async function(userId, userEmail) {
      if (!confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ±Ù‚ÙŠØ© ${userEmail} Ø¥Ù„Ù‰ Ù…Ø³Ø¤ÙˆÙ„ØŸ`)) {
        return;
      }
      
      try {
        const userRef = doc(db, "dnrx_users", userId);
        await updateDoc(userRef, {
          userType: 'admin',
          approved: true,
          updatedAt: serverTimestamp()
        });
        
        showMessage('success', `âœ… ØªÙ…Øª ØªØ±Ù‚ÙŠØ© ${userEmail} Ø¥Ù„Ù‰ Ù…Ø³Ø¤ÙˆÙ„`);
        loadAllUsers();
        
      } catch (error) {
        console.error("âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ±Ù‚ÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:", error);
        showMessage('error', 'âŒ ÙØ´Ù„ ÙÙŠ ØªØ±Ù‚ÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
      }
    };

    window.removeAdmin = async function(userId, userEmail) {
      if (!confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø²Ø§Ù„Ø© ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† ${userEmail}ØŸ`)) {
        return;
      }
      
      try {
        const userRef = doc(db, "dnrx_users", userId);
        await updateDoc(userRef, {
          userType: 'user',
          updatedAt: serverTimestamp()
        });
        
        showMessage('success', `âœ… ØªÙ…Øª Ø¥Ø²Ø§Ù„Ø© ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† ${userEmail}`);
        loadAllUsers();
        
      } catch (error) {
        console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ø²Ø§Ù„Ø© ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„:", error);
        showMessage('error', 'âŒ ÙØ´Ù„ ÙÙŠ Ø¥Ø²Ø§Ù„Ø© ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„');
      }
    };

    window.deleteUser = async function(userId, userEmail) {
      if (!confirm(`âš ï¸ ØªØ­Ø°ÙŠØ±: Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ${userEmail} Ø¨Ø´ÙƒÙ„ Ù†Ù‡Ø§Ø¦ÙŠØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§ØªÙ‡ ÙˆÙ…ØªØ¬Ø±Ù‡.`)) {
        return;
      }
      
      try {
        // Ø­Ø°Ù Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ù…Ø±ØªØ¨Ø· Ø¥Ø°Ø§ ÙˆØ¬Ø¯
        const shopsRef = collection(db, "dnrx_stores");
        const q = query(shopsRef, where("ownerId", "==", userId));
        const querySnapshot = await getDocs(q);
        
        querySnapshot.forEach(async (docSnap) => {
          await deleteDoc(doc(db, "dnrx_stores", docSnap.id));
        });
        
        // Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        await deleteDoc(doc(db, "dnrx_users", userId));
        
        showMessage('success', `âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ${userEmail}`);
        loadAllUsers();
        loadAllShops();
        
      } catch (error) {
        console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:", error);
        showMessage('error', 'âŒ ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
      }
    };

    window.deleteShop = async function(shopId, shopName) {
      if (!confirm(`âš ï¸ ØªØ­Ø°ÙŠØ±: Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ù…ØªØ¬Ø± "${shopName}"ØŸ Ø³ÙŠØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ø±ØªØ¨Ø§Ø· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØ¬Ø±.`)) {
        return;
      }
      
      try {
        // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø±ØªØ¨Ø· Ø¨Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØ¬Ø±
        const shopRef = doc(db, "dnrx_stores", shopId);
        const shopSnap = await getDoc(shopRef);
        
        if (shopSnap.exists()) {
          const shopData = shopSnap.data();
          
          // Ø¥Ù„ØºØ§Ø¡ Ø§Ø±ØªØ¨Ø§Ø· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„Ù…ØªØ¬Ø±
          if (shopData.ownerId) {
            await updateDoc(doc(db, "dnrx_users", shopData.ownerId), {
              storeId: null,
              updatedAt: serverTimestamp()
            });
          }
          
          // Ø­Ø°Ù Ø§Ù„Ù…ØªØ¬Ø±
          await deleteDoc(shopRef);
          
          showMessage('success', `âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…ØªØ¬Ø± "${shopName}"`);
          loadAllShops();
          loadAllUsers();
        }
        
      } catch (error) {
        console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ØªØ¬Ø±:", error);
        showMessage('error', 'âŒ ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ØªØ¬Ø±');
      }
    };

    window.viewShopDetails = function(shopId) {
      const shop = allShops.find(s => s.id === shopId);
      if (shop) {
        const details = `
          Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø±: ${shop.storeName}
          ØµØ§Ø­Ø¨ Ø§Ù„Ù…ØªØ¬Ø±: ${shop.ownerName} (${shop.ownerEmail})
          Ù†ÙˆØ¹ Ø§Ù„Ù…ØªØ¬Ø±: ${shop.storeType}
          Ø§Ù„Ø¯ÙˆÙ„Ø©: ${shop.country}
          Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©: ${shop.city}
          Ø§Ù„Ø¹Ù…Ù„Ø©: ${shop.currency}
        `;
        alert(details);
      }
    };

    window.filterUsers = function() {
      renderUsersTable();
    };

    window.setUserFilter = function(filter) {
      currentUserFilter = filter;
      
      // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„ÙÙ„ØªØ±
      document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');
      
      renderUsersTable();
    };

    window.filterShops = function() {
      renderShopsTable();
    };

    async function logoutAdmin() {
      if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ')) {
        try {
          await signOut(auth);
          localStorage.removeItem('dnrx_user');
          window.location.href = 'login.html';
        } catch (error) {
          console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬:', error);
          showMessage('error', 'âŒ ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬');
        }
      }
    }

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    onAuthStateChanged(auth, async (user) => {
      if (user) {
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù…Ø§ Ø¥Ø°Ø§ ÙƒÙ†Ø§ Ù‚Ø¯ Ù‚Ù…Ù†Ø§ Ø¨Ø§Ù„ÙØ¹Ù„ Ø¨ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        if (isRedirecting) {
          console.log('âœ… ÙŠØªÙ… Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø¨Ø§Ù„ÙØ¹Ù„ØŒ ØªØ®Ø·ÙŠ...');
          return;
        }
        
        currentAdmin = user;
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø£Ø¯Ù…Ù†
        const isAdmin = checkAdminPermissions(user);
        
        if (!isAdmin) {
          showMessage('error', 'âŒ Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†');
          setTimeout(() => {
            window.location.href = 'main.html';
          }, 2000);
          return;
        }
        
        // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø¯Ù…Ù†
        document.getElementById('adminEmail').textContent = user.email;
        document.getElementById('adminId').textContent = user.uid.substring(0, 8) + '...';
        
        // Ø¥Ø¶Ø§ÙØ© Ø­Ø¯Ø« Ø§Ù„Ù†Ù‚Ø± Ù„Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
        document.getElementById('logoutBtn').addEventListener('click', logoutAdmin);
        
        // ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        await loadAllUsers();
        await loadAllShops();
        
      } else {
        // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ Ù…Ø³ØªØ®Ø¯Ù…ØŒ Ù‚Ù… Ø¨ØªÙˆØ¬ÙŠÙ‡Ù‡ Ø¥Ù„Ù‰ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        if (!isRedirecting) {
          console.log('âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ØŒ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø¥Ù„Ù‰ login.html');
          isRedirecting = true;
          window.location.href = 'login.html';
        }
      }
    });

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙˆÙ„ Ù…Ø±Ø©
    window.addEventListener('load', () => {
      console.log('ğŸš€ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ù…Ù† Ø¬Ø§Ù‡Ø²Ø©');
    });
  </script>
</body>
</html>